#Vaatii sklearn kirjaston, lataa tällä komennolla:
#pip install sklearn-deap
#Dokumentaatio täällä: https://github.com/rsteca/sklearn-deap



import sim1_1
import numpy as np
from evolutionary_search import maximize


#Param_grid määrittää avaruuden jonka yli evoluutioalgoritmi etsii parasta parametri yhdistelmää

args = {}
param_grid = {'emashort': np.linspace(1,50,50, dtype=int), 'emalong': np.linspace(1,100,100,dtype=int), 'rsibuy': np.linspace(1,100,100,dtype=int), 'rsisell': np.linspace(1,100,100,dtype=int), 'rsval': np.linspace(1,100,100,dtype=int)}

#Runs the evolution algorithm N times, saves best found parameters and resulting portfolio values to a txt file

for i in range(1,20):
    optimalparams, optimalresult, c, d, e= maximize(sim1_1.sim, param_grid, args, verbose=False)
    print (optimalparams)
    print (optimalresult)
    file=open("optimal parameters.txt", "a")
    file.write("%s|%s|%s\n" % (i,optimalparams, optimalresult))
    file.close()


